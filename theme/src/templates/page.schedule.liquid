
{% include 'breadcrumbs' %}


{% assign collection = collections.all %}

{% paginate collection.products by 8 %}
<div class="products__collection">
  <ul class="product collection__grid">
    {% for product in collection.products | limit: 8 %}
      <li class="item">{{ product.title }}</li>
    {% endfor %}

    
    {% if paginate.next %}
      <li class="js-load-more"><a href="{{ paginate.next.url }}">More Shows</a></li>
    {% endif %}
  </ul>

  <div id="product-list-foot"></div>
</div>
{% endpaginate %}


<script>
  // Shortcircuit variable


function loadMore() {

  // Get URL from the loadmore button
  let nextUrl = $('.js-load-more a').attr("href");

  // Make ajax call to next page for load more data
  $.ajax({
    url: nextUrl,
    type: 'GET',
    beforeSend: function() {
      $('.js-load-more').remove();
    }
  })
  .done(function(data) {
    // Append data
    $('.product').append($(data).find('.product').html());

    // On success, reset shortcircuit
    triggered = false
  });
}


$(document).ready(function () {
  $('.js-load-more').click(function(e){
    e.preventDefault();
    e.stopPropagation();
    loadMore();
  });
});
</script>